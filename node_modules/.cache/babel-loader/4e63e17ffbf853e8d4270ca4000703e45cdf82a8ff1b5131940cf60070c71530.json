{"ast":null,"code":"import React,{useState,useEffect}from'react';import Sidebar from'../components/sidebar';import StatCard from'../components/statcard';import UserTable from'../components/UserTable';import'./Dashboard.css';// CSS file for dashboard styling\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Dashboard=()=>{const[currentView,setCurrentView]=useState('Active Users');const[users,setUsers]=useState([]);const[inactiveUsersCount,setInactiveUsersCount]=useState(0);const[consultantsCount,setConsultantsCount]=useState(0);const[customersCount,setCustomersCount]=useState(0);const[totalActiveUsers,setTotalActiveUsers]=useState(0);useEffect(()=>{const fetchActiveAccounts=async()=>{try{const response=await fetch('https://bridechila-apis-2.onrender.com/activeAccounts');const data=await response.json();const formattedUsers=data.filter(user=>user.conAccApproved).map(user=>({id:user.id,// Ensure user ID is included\nname:user.name,email:user.email,number:user.phoneNumber,profession:user.profession||'N/A',status:user.conAccApproved?'Active':'Inactive',role:user.role}));setUsers(formattedUsers);}catch(error){console.error('Error fetching active accounts:',error);}};const fetchTotals=async()=>{try{const responses=await Promise.all([fetch('https://bridechila-apis-2.onrender.com/totalActiveUsers'),fetch('https://bridechila-apis-2.onrender.com/totalInactiveUsers'),fetch('https://bridechila-apis-2.onrender.com/totalConsultants'),fetch('https://bridechila-apis-2.onrender.com/totalCustomers')]);const[activeData,inactiveData,consultantsData,customersData]=await Promise.all(responses.map(response=>response.json()));setTotalActiveUsers(activeData.totalActiveUsers);setInactiveUsersCount(inactiveData.totalInactiveUsers);setConsultantsCount(consultantsData.totalConsultants);setCustomersCount(customersData.totalCustomers);}catch(error){console.error('Error fetching totals:',error);}};fetchActiveAccounts();fetchTotals();},[currentView]);const handleViewChange=view=>{setCurrentView(view);};const handleDeactivate=async Id=>{try{const response=await fetch(`https://bridechila-apis-2.onrender.com/deactivate/${Id}`,{method:'PATCH'// Assuming POST request for deactivation\n});if(response.ok){alert('User Deactivated successfully!');// Optionally update the UI to reflect the change\nsetUsers(users.map(user=>user.id===Id?{...user,status:'Inactive'}:user));}else{alert('Failed to Deactivate user.');}}catch(error){console.error('Error deactivating user:',error);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard\",children:[/*#__PURE__*/_jsx(Sidebar,{onMenuClick:handleViewChange}),/*#__PURE__*/_jsxs(\"div\",{className:\"content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"stat-cards\",children:[/*#__PURE__*/_jsx(StatCard,{title:\"Total Active Users\",value:totalActiveUsers}),/*#__PURE__*/_jsx(StatCard,{title:\"Total Inactive Users\",value:inactiveUsersCount}),/*#__PURE__*/_jsx(StatCard,{title:\"Total Consultants\",value:consultantsCount}),/*#__PURE__*/_jsx(StatCard,{title:\"Total Customers\",value:customersCount})]}),/*#__PURE__*/_jsx(UserTable,{users:users,heading:currentView==='Consultants'?'All Consultants':currentView==='Inactive Users'?'All Inactive Users':'All Active Users',buttonLabel:currentView==='Inactive Users'?'Activate':'Deactivate',onButtonClick:handleDeactivate// Pass handleDeactivate to UserTable\n})]})]});};export default Dashboard;","map":{"version":3,"names":["React","useState","useEffect","Sidebar","StatCard","UserTable","jsx","_jsx","jsxs","_jsxs","Dashboard","currentView","setCurrentView","users","setUsers","inactiveUsersCount","setInactiveUsersCount","consultantsCount","setConsultantsCount","customersCount","setCustomersCount","totalActiveUsers","setTotalActiveUsers","fetchActiveAccounts","response","fetch","data","json","formattedUsers","filter","user","conAccApproved","map","id","name","email","number","phoneNumber","profession","status","role","error","console","fetchTotals","responses","Promise","all","activeData","inactiveData","consultantsData","customersData","totalInactiveUsers","totalConsultants","totalCustomers","handleViewChange","view","handleDeactivate","Id","method","ok","alert","className","children","onMenuClick","title","value","heading","buttonLabel","onButtonClick"],"sources":["D:/My tasks/admin-dashboard/src/pages/Dashboard.js"],"sourcesContent":["\r\nimport React, { useState, useEffect } from 'react';\r\nimport Sidebar from '../components/sidebar';\r\nimport StatCard from '../components/statcard';\r\nimport UserTable from '../components/UserTable';\r\nimport './Dashboard.css'; // CSS file for dashboard styling\r\n\r\nconst Dashboard = () => {\r\n  const [currentView, setCurrentView] = useState('Active Users');\r\n  const [users, setUsers] = useState([]);\r\n  const [inactiveUsersCount, setInactiveUsersCount] = useState(0);\r\n  const [consultantsCount, setConsultantsCount] = useState(0);\r\n  const [customersCount, setCustomersCount] = useState(0);\r\n  const [totalActiveUsers, setTotalActiveUsers] = useState(0);\r\n\r\n  useEffect(() => {\r\n    const fetchActiveAccounts = async () => {\r\n      try {\r\n        const response = await fetch('https://bridechila-apis-2.onrender.com/activeAccounts');\r\n        const data = await response.json();\r\n        const formattedUsers = data\r\n          .filter(user => user.conAccApproved)\r\n          .map(user => ({\r\n            id: user.id, // Ensure user ID is included\r\n            name: user.name,\r\n            email: user.email,\r\n            number: user.phoneNumber,\r\n            profession: user.profession || 'N/A',\r\n            status: user.conAccApproved ? 'Active' : 'Inactive',\r\n            role: user.role,\r\n          }));\r\n\r\n        setUsers(formattedUsers);\r\n      } catch (error) {\r\n        console.error('Error fetching active accounts:', error);\r\n      }\r\n    };\r\n\r\n    const fetchTotals = async () => {\r\n      try {\r\n        const responses = await Promise.all([\r\n          fetch('https://bridechila-apis-2.onrender.com/totalActiveUsers'),\r\n          fetch('https://bridechila-apis-2.onrender.com/totalInactiveUsers'),\r\n          fetch('https://bridechila-apis-2.onrender.com/totalConsultants'),\r\n          fetch('https://bridechila-apis-2.onrender.com/totalCustomers')\r\n        ]);\r\n\r\n        const [activeData, inactiveData, consultantsData, customersData] = await Promise.all(\r\n          responses.map(response => response.json())\r\n        );\r\n\r\n        setTotalActiveUsers(activeData.totalActiveUsers);\r\n        setInactiveUsersCount(inactiveData.totalInactiveUsers);\r\n        setConsultantsCount(consultantsData.totalConsultants);\r\n        setCustomersCount(customersData.totalCustomers);\r\n      } catch (error) {\r\n        console.error('Error fetching totals:', error);\r\n      }\r\n    };\r\n\r\n    fetchActiveAccounts();\r\n    fetchTotals();\r\n  }, [currentView]);\r\n\r\n  const handleViewChange = (view) => {\r\n    setCurrentView(view);\r\n  };\r\n\r\n  const handleDeactivate = async (Id) => {\r\n    try {\r\n     const response = await fetch(`https://bridechila-apis-2.onrender.com/deactivate/${Id}`, {\r\n        method: 'PATCH' // Assuming POST request for deactivation\r\n      });\r\n      if (response.ok) {\r\n        alert('User Deactivated successfully!');\r\n      // Optionally update the UI to reflect the change\r\n      setUsers(users.map(user => \r\n        user.id === Id ? { ...user, status: 'Inactive' } : user\r\n      ));\r\n    }\r\n    else {\r\n      alert('Failed to Deactivate user.');\r\n    }\r\n    } catch (error) {\r\n      console.error('Error deactivating user:', error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"dashboard\">\r\n      <Sidebar onMenuClick={handleViewChange} />\r\n      <div className=\"content\">\r\n        <div className=\"stat-cards\">\r\n          <StatCard title=\"Total Active Users\" value={totalActiveUsers} />\r\n          <StatCard title=\"Total Inactive Users\" value={inactiveUsersCount} />\r\n          <StatCard title=\"Total Consultants\" value={consultantsCount} />\r\n          <StatCard title=\"Total Customers\" value={customersCount} />\r\n        </div>\r\n        <UserTable \r\n          users={users} \r\n          heading={\r\n            currentView === 'Consultants' \r\n              ? 'All Consultants' \r\n              : currentView === 'Inactive Users' \r\n                ? 'All Inactive Users' \r\n                : 'All Active Users'\r\n          }\r\n          buttonLabel={\r\n            currentView === 'Inactive Users' \r\n              ? 'Activate' \r\n              : 'Deactivate'\r\n          }\r\n          onButtonClick={handleDeactivate} // Pass handleDeactivate to UserTable\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Dashboard;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}